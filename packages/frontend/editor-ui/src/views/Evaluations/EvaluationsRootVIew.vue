<script setup lang="ts">
import { useWorkflowsStore } from '@/stores/workflows.store';
import { useUsageStore } from '@/stores/usage.store';
import { useAsyncState } from '@vueuse/core';
// import { useRouter } from 'vue-router';

const props = defineProps<{
	name: string;
}>();

// const router = useRouter();
const workflowsStore = useWorkflowsStore();
const usageStore = useUsageStore();

const { isReady } = useAsyncState(async () => {
	await usageStore.getLicenseInfo();
	const workflowId = props.name;
	const isAlreadyInitialized = workflowsStore.workflow.id === workflowId;

	if (isAlreadyInitialized) return;

	const workflow = await workflowsStore.fetchWorkflow(workflowId);
	workflowsStore.workflow = workflow;
}, undefined);
</script>

<template>
	<div :class="$style.evaluationsView">
		<router-view v-if="isReady" />
	</div>
</template>

<style module lang="scss">
.evaluationsView {
	width: 100%;
	height: 100%;
}
</style>
